<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Línea Curva Dinámica</title>
    <link rel="stylesheet" href="main.css">
    <link href="https://cdn.jsdelivr.net/npm/@splidejs/splide@4.1.4/dist/css/splide.min.css" rel="stylesheet">
    <style>
        .timeline {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin: 50px;
            position: relative;
        }

        .box {
            padding: 10px 20px;
            background-color: #8fbf82;
            color: white;
            border-radius: 15px;
            font-family: Arial, sans-serif;
            cursor: pointer;
            user-select: none;
        }

        canvas {
            border: 1px solid lightgray;
            position: absolute;
            top: 100px; /* Ajustamos la posición del canvas */
            left: 0;
        }
    </style>
</head>
<body>

<div class="timeline" id="timeline">
  <div class="splide" id="splide-prueba" aria-label="Basic Structure Example">
    <div class="splide__track">
        <ul class="splide__list">
            <li class="splide__slide box" data-index="1">
                <div class="history">
                    <div class="info">
                        <h3>Antes del origen</h3>
                        <p>Esa noche, reventaron 36 bombas en Lima. El Perú estaba sumido en una crisis
                            ocasionada por el terrorismo. Había que decidir si seguir en el Perú o dejarlo todo
                            y viajar al extranjero.</p>
                    </div>
                    <button class="build-btn" data-progress="25">1992</button>
                </div>
            </li>
            <li class="splide__slide box" data-index="2">
                <div class="history">
                    <div class="info">
                        <h3>Antes del origen</h3>
                        <p>Esa noche, reventaron 36 bombas en Lima. El Perú estaba sumido en una crisis
                            ocasionada por el terrorismo. Había que decidir si seguir en el Perú o dejarlo todo
                            y viajar al extranjero.</p>
                    </div>
                    <button class="build-btn" data-progress="50">1993</button>
                </div>
            </li>
            <li class="splide__slide box" data-index="3">
                <div class="history">
                    <div class="info">
                        <h3>Antes del origen</h3>
                        <p>Esa noche, reventaron 36 bombas en Lima. El Perú estaba sumido en una crisis
                            ocasionada por el terrorismo. Había que decidir si seguir en el Perú o dejarlo todo
                            y viajar al extranjero.</p>
                    </div>
                    <button class="build-btn" data-progress="75">1994</button>
                </div>
            </li>
            <li class="splide__slide box" data-index="4">
                <div class="history">
                    <div class="info">
                        <h3>Antes del origen</h3>
                        <p>Esa noche, reventaron 36 bombas en Lima. El Perú estaba sumido en una crisis
                            ocasionada por el terrorismo. Había que decidir si seguir en el Perú o dejarlo todo
                            y viajar al extranjero.</p>
                    </div>
                    <button class="build-btn" data-progress="100">2000</button>
                </div>
            </li>
            <li class="splide__slide box" data-index="5">
                <div class="history">
                    <div class="info">
                        <h3>Antes del origen</h3>
                        <p>Esa noche, reventaron 36 bombas en Lima. El Perú estaba sumido en una crisis
                            ocasionada por el terrorismo. Había que decidir si seguir en el Perú o dejarlo todo
                            y viajar al extranjero.</p>
                    </div>
                    <button class="build-btn" data-progress="125">2004</button>
                </div>
            </li>
            <li class="splide__slide box" data-index="6">
                <div class="history">
                    <div class="info">
                        <h3>Antes del origen</h3>
                        <p>Esa noche, reventaron 36 bombas en Lima. El Perú estaba sumido en una crisis
                            ocasionada por el terrorismo. Había que decidir si seguir en el Perú o dejarlo todo
                            y viajar al extranjero.</p>
                    </div>
                    <button class="build-btn" data-progress="150">2010</button>
                </div>
            </li>
            <li class="splide__slide box" data-index="7">
                <div class="history">
                    <div class="info">
                        <h3>Antes del origen</h3>
                        <p>Esa noche, reventaron 36 bombas en Lima. El Perú estaba sumido en una crisis
                            ocasionada por el terrorismo. Había que decidir si seguir en el Perú o dejarlo todo
                            y viajar al extranjero.</p>
                    </div>
                    <button class="build-btn" data-progress="175">2022</button>
                </div>
            </li>
            <li class="splide__slide box" data-index="8">
                <div class="history">
                    <div class="info">
                        <h3>Antes del origen</h3>
                        <p>Esa noche, reventaron 36 bombas en Lima. El Perú estaba sumido en una crisis
                            ocasionada por el terrorismo. Había que decidir si seguir en el Perú o dejarlo todo
                            y viajar al extranjero.</p>
                    </div>
                    <button class="build-btn" data-progress="200">2023</button>
                </div>
            </li>
        </ul>
    </div>
</div>

</div>

<canvas id="canvas" width="1200" height="300"></canvas>

<script src="https://cdn.jsdelivr.net/npm/@splidejs/splide@4.1.4/dist/js/splide.min.js"></script>
<script>
document.addEventListener('DOMContentLoaded', function () {
        const splide = new Splide('#splide-prueba', {
            type: 'slide',
            perPage: 4,
            perMove: 1,
            gap: '2rem',
            pagination: false,
            padding: {
                left: '30px',
                right: '40px'
            },
            breakpoints: {
                420:{
                    perPage: 2,
                    perMove: 1,
                }
            }
        }).mount();
    });
</script>
<script>
    // Obtener el contexto del canvas
    const canvas = document.getElementById('canvas');
    const ctx = canvas.getContext('2d');

    let initialX = 150;  // Posición inicial de X para la primera curva
    const initialY = 150;  // Posición Y constante
    const curveHeight = 100;  // Altura de las curvas
    const curveLength = 200;  // Longitud de cada curva
    let curvesDrawn = 0; // Cantidad de curvas dibujadas

    function drawCurve() {
        ctx.strokeStyle = '#6ab04c';
        ctx.lineWidth = 2;
        ctx.beginPath();
        ctx.moveTo(initialX, initialY);  // Punto de inicio de la curva

        if (curvesDrawn % 2 === 0) {
            // Curva hacia arriba
            ctx.quadraticCurveTo(initialX + (curveLength / 2), initialY - curveHeight, initialX + curveLength, initialY);
        } else {
            // Curva hacia abajo
            ctx.quadraticCurveTo(initialX + (curveLength / 2), initialY + curveHeight, initialX + curveLength, initialY);
        }

        ctx.stroke();

        // Actualiza la posición X para la siguiente curva
        initialX += curveLength;
        curvesDrawn++;
    }

    function resetCurves() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);  // Limpia el canvas
        initialX = 150;  // Reinicia la posición X
        curvesDrawn = 0;  // Reinicia la cantidad de curvas dibujadas
    }

    // Función para dibujar el número de curvas necesarias hasta un div
    function drawCurvesToIndex(targetIndex) {
        resetCurves();  // Limpia el canvas y reinicia la posición
        for (let i = 0; i < targetIndex - 1; i++) {  // Dibuja tantas curvas como el índice del div menos 1
            drawCurve();  // Dibuja cada curva hasta llegar al div seleccionado
        }
    }


    document.querySelectorAll('.box').forEach(box => {
        box.addEventListener('click', function() {
            const targetIndex = parseInt(this.getAttribute('data-index'));  // Obtener el índice del div
            drawCurvesToIndex(targetIndex);  // Dibujar curvas hasta el div
        });
    });
</script>

</body>
</html>
